# `03-docker-volumes-and-networks.md`

### Title: **Docker Volumes and Networks**

---

### ğŸ—„ï¸ What are Docker Volumes?

Docker **volumes** are used to persist data generated by containers. Containers are typically ephemeral, meaning that any data created inside them is lost when they are stopped or deleted. Volumes provide a way to retain and manage data across container lifecycles.

#### Key Features:
- **Persistence**: Data stored in volumes is not tied to the lifecycle of a container.
- **Sharing**: Volumes can be shared between multiple containers.
- **Performance**: Volumes offer better performance than bind mounts, especially on non-Linux hosts.
- **Management**: Volumes can be easily backed up, restored, and managed independently of containers.

---

### ğŸ“¦ Types of Docker Volumes

1. **Named Volumes**:
   - Created and managed by Docker.
   - They exist outside the container's filesystem and can be reused by multiple containers.
   ```bash
   docker volume create my-volume
   ```

2. **Anonymous Volumes**:
   - Created when a container is started without specifying a volume name.
   - Docker assigns a random name, but they can be difficult to track and manage.
   ```bash
   docker run -v /data busybox
   ```

3. **Host Bind Mounts**:
   - Binds a directory from the host to a container. Any changes made in the container will be reflected on the host and vice versa.
   - More control over where data is stored, but they are less flexible and more dependent on the host's file structure.
   ```bash
   docker run -v /host/path:/container/path nginx
   ```

---

### ğŸ›  Managing Docker Volumes

- **Create a volume**:
  ```bash
  docker volume create my-data-volume
  ```

- **List volumes**:
  ```bash
  docker volume ls
  ```

- **Remove a volume**:
  ```bash
  docker volume rm my-data-volume
  ```

- **Using a volume in a container**:
  ```bash
  docker run -d --name webapp -v my-data-volume:/usr/src/app nginx
  ```
  In this example, `my-data-volume` is mounted to the `/usr/src/app` directory inside the container.

---

### ğŸŒ What is Docker Networking?

Docker networking enables communication between containers, the host, and external networks. By default, containers run in isolation, but Dockerâ€™s networking capabilities allow them to interact securely and efficiently.

---

### ğŸ”Œ Types of Docker Networks

1. **Bridge Network (Default)**:
   - Containers connected to the same bridge network can communicate with each other.
   - Ideal for applications where containers run on a single host.
   - Automatically created when you start a container unless a network is specified.

   Example:
   ```bash
   docker network create my-bridge-network
   docker run -d --name container1 --network my-bridge-network nginx
   docker run -d --name container2 --network my-bridge-network redis
   ```

2. **Host Network**:
   - The container shares the host machineâ€™s network stack and uses the hostâ€™s IP address.
   - Useful when you want the container to bypass Dockerâ€™s network isolation.
   ```bash
   docker run --network host nginx
   ```

3. **Overlay Network**:
   - Used to connect containers across multiple Docker hosts in a cluster.
   - Ideal for scaling containerized applications across a swarm of Docker nodes.
   - Requires Docker Swarm or Kubernetes.

4. **None**:
   - Completely disables networking for a container.
   - Useful for containers that donâ€™t require network access.
   ```bash
   docker run --network none busybox
   ```

---

### ğŸ”— Connecting Containers with Networks

#### Step 1: Create a custom network
```bash
docker network create my-custom-network
```

#### Step 2: Run containers on the custom network
```bash
docker run -d --name container1 --network my-custom-network nginx
docker run -d --name container2 --network my-custom-network redis
```

#### Step 3: Verify network connectivity
Use the `docker exec` command to run a command inside a container and verify connectivity between them:
```bash
docker exec -it container1 ping container2
```

---

### ğŸ§  Docker Networking Concepts

- **IP Addressing**: Each container is assigned a unique IP address within the Docker network.
- **DNS Resolution**: Docker provides an internal DNS server that resolves container names to IP addresses, enabling container-to-container communication by name.
- **Network Drivers**: Different network drivers (e.g., `bridge`, `host`, `overlay`) determine the type of network a container uses.

---

### ğŸ›  Basic Docker Network Commands

- **List Docker networks**:
  ```bash
  docker network ls
  ```

- **Inspect a network**:
  ```bash
  docker network inspect <network-name>
  ```

- **Disconnect a container from a network**:
  ```bash
  docker network disconnect <network-name> <container-name>
  ```

- **Remove a network**:
  ```bash
  docker network rm <network-name>
  ```

---

### ğŸ§‘â€ğŸ’» Exercises: Docker Volumes and Networks

1. **Create and Mount a Volume**:
   - Create a named volume and mount it to a container.
   - Add files to the volume from the container and access them from another container using the same volume.

2. **Create a Custom Network**:
   - Create a custom bridge network and run multiple containers on it.
   - Use the container names to ping one container from another and verify network communication.

3. **Use Host Networking**:
   - Run a container using host networking and observe the difference in how it behaves compared to bridge networking.

4. **Explore Network Drivers**:
   - Create an overlay network (requires Docker Swarm) and deploy containers across multiple nodes to understand Dockerâ€™s clustering and networking capabilities.

---

### ğŸš§ Whatâ€™s Next?

In the next section, we will explore **Docker Compose**, a tool to define and run multi-container Docker applications with ease.

---

This file covers the essentials of Docker volumes and networks, giving you a foundation to build on. Let me know if youâ€™d like to modify anything or move forward to the next topic!